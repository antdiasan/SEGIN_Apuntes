Una **imagen de respaldo** es una copia exacta de todo el contenido de un disco o de una particiÃ³n (incluye sistema operativo, aplicaciones, configuraciÃ³n, arranque y datos).  

Suele almacenarse en **un Ãºnico fichero** (segÃºn la herramienta puede ser `.iso`, `.img`, `.vhd/.vhdx`, conjuntos de archivos de Clonezilla, etc.). 
No copia â€œarchivos sueltosâ€: captura la **estructura completa** (MBR/GPT, tabla de particiones y metadatos del sistema de archivos), descartando los que no contienen datos. Obviamente, estos ficlheros suelen tener tamaÃ±os descomunales, con un mÃ¡ximo equivalente a la capacidad del disco respaldado.

Para ser un respaldo consistente, es prioritario que nadie acceda al disco durante el proceso de respaldo. Esto implica que, si se quiere realizar una imagen de respaldo del disco de arranque de un servidor, hay que reiniciar el servidor y arrancar un sistema operativo live desde almacenamiento externo

> ğŸ“ **Toma nota (protecciÃ³n de datos):**  
> Si la imagen contiene **datos personales** y va a salir de las instalaciones (disco externo, nube, transporte), **debe cifrarse**.

---

## 1 Â¿Para quÃ© sirve una imagen?

- **Recuperar un equipo** rÃ¡pidamente al estado exacto en que se creÃ³ la imagen.  
- **InstantÃ¡nea** del sistema en un momento del pasado (antes de un cambio crÃ­tico).  
- **Migraciones/actualizaciones**: sustituciÃ³n de discos, cambios de hardware, actualizaciones del S.O.  
- **Respuesta ante incidentes** (ransomware, corrupciÃ³n de archivos).  
- **Despliegue masivo** de equipos con una â€œimagen maestraâ€ (aulas, oficinas).

---

## 2 Modalidades de imagen

- **Imagen de disco completo** vs **imagen de particiÃ³n**  
    - *Disco completo*: incluye todas las particiones (EFI/arranque, sistema, datos, recuperaciÃ³n).  
    - *ParticiÃ³n*: solo el volumen seleccionado (Ãºtil para respaldar el sistema o los datos por separado).

- **Sector a sector (raw)** vs **por bloques usados (inteligente)**  
    - *Sector a sector*: copia todos los sectores (mÃ¡s lenta y ocupa mÃ¡s, pero exacta incluso con espacios vacÃ­os).  
    - *Por bloques usados*: solo copia lo que contiene datos (mÃ¡s rÃ¡pida y compacta).

- **En frÃ­o** vs **en caliente**  
    - *En frÃ­o*: el sistema **no estÃ¡ arrancado** desde el disco que se imagen (se usa un Live USB/CD). â†’ **Recomendado** para una copia **consistente**.  
    - *En caliente*: se crea desde el propio sistema en marcha (posibles bloqueos de archivos; algunas herramientas lo permiten con snapshots).

> âš ï¸ **RecomendaciÃ³n:**  
> Para asegurar consistencia, realiza la imagen **en frÃ­o** (Live) y evita accesos al disco durante el proceso.

---

## 3 Requisitos y planificaciÃ³n

- **Espacio de destino suficiente** (ten en cuenta la **compresiÃ³n**: suele reducir el tamaÃ±o de la imagen).  
- **Medio de arranque** (USB/CD) si se realiza en frÃ­o.  
- **Destino**: disco externo, NAS o servidor (NFS, SMB/CIFS, SSH, etc.).  
- **Etiquetado y versionado** claros (equipo, fecha, versiÃ³n de S.O.).  
- **VerificaciÃ³n**: habilita checksum/verificaciÃ³n posterior de la imagen.  
- **Cifrado** si va a salir del centro (y guarda las **claves** de forma segura).  
- **Compatibilidad de arranque**: anota si el equipo usa **UEFI/GPT** o **BIOS/MBR**.

---

## 4 Herramientas habituales (visiÃ³n rÃ¡pida)

- **Clonezilla** (Live y Server Edition): referencia libre para imagen/clonado por bloques.  
- **Windows**: â€œCopia de seguridad de Windowsâ€ (imÃ¡genes del sistema), `wbAdmin`, VHD/VHDX.  
- **Linux**: `dd` (raw), **partclone**, **fsarchiver**, **rear** (disaster recovery).  
- **Otras**: Macrium Reflect, Acronis True Image, Veeam Agent (gratuito en ediciÃ³n workstation).

---

## 5 Crear una imagen con Clonezilla Live (resumen guiado)

1. **Arranca** el equipo desde el **Live USB/CD** de Clonezilla.  
2. Selecciona **device-image** (guardar/restaurar imagen) y el **destino**:  
   - `local_dev` (disco USB), `ssh_server`, `samba_server`, `nfs_server`, etc.  
3. Elige **modo principiante** (recomendado) o **avanzado** (para mÃ¡s control).  
4. Selecciona **origen** (disco o particiÃ³n a imagen).  
5. Define **compresiÃ³n** (gzip/lz4/zstd), **verificaciÃ³n** y **divisiÃ³n de archivos** si el destino lo requiere.  
6. Confirma y **comienza** la creaciÃ³n.  
7. Al finalizar, revisa el **log** y, si estÃ¡ activado, el **checksum**.

> ğŸ” **Consejo:** si la imagen saldrÃ¡ del centro, cifra el dispositivo destino (por ejemplo, BitLocker en Windows o LUKS en Linux) **antes** de guardar la imagen.

---

## 6 Restaurar una imagen (puntos crÃ­ticos)

- **TamaÃ±o del disco**: igual o **mayor** que el original (especialmente en sector a sector).  
- **Modo de arranque**: respeta **UEFI/GPT** vs **BIOS/MBR**.  
- **Controladores**: si restauras en *hardware distinto*, puede requerir **rehabilitar drivers** o usar opciones de restauraciÃ³n â€œa hardware disÃ­milâ€ (segÃºn herramienta).  
- **Particiones**: comprueba que las particiones de arranque (EFI/boot) se restauran y son **activas**.  
- **Post-restauraciÃ³n**: arranca, verifica integridad (servicios, usuarios, aplicaciones) y **cambia SID/nombre** si la imagen se multiplica en varias mÃ¡quinas del dominio.

> âœ… **RestauraciÃ³n con Clonezilla (idea general):**  
> Arranca con Live â†’ `device-image` â†’ **restore** â†’ elige **imagen** y **disco/particiÃ³n destino** â†’ confirma â†’ al terminar, apaga y arranca desde el disco restaurado.

---

## 7 Buenas prÃ¡cticas

- MantÃ©n **al menos 1 imagen reciente validada** (â€œestado oroâ€ tras instalaciÃ³n + parches).  
- Aplica la **regla 3-2-1**: conserva imÃ¡genes en **2 soportes diferentes** y **1 fuera** de la sede.  
- **Documenta**: quÃ© incluye la imagen, fecha, sistema, software y claves necesarias.  
- **Prueba de restauraciÃ³n** periÃ³dica en un equipo/VM de laboratorio.  
- **Actualiza** la imagen maestra tras cambios relevantes (grandes actualizaciones, drivers crÃ­ticos).
